---
sidebar_position: 1
---

# パフォーマンスチェック

カメラの動作が遅いと感じるときや期待されるフレームレートよりも低い場合、実際のパフォーマンスを測定し、改善の方法を見つけるためのいくつかの方法があります。

この文書では、デバイスの実際のパフォーマンスを測定するためのツールとして、`arv-camera-test`と`Performance Test`を紹介し、デバイスの遅延要因の特定をサポートします。

## Tool 1. arv-camera-test

遅延発生にはいくつかの原因が考えられますが、そもそもホストマシンが実際に想定されるレートでフレームを受け取っていないことがあります。

`arv-camera-test-0.8`は、Aravis が提供するツールでSensing-Dev SDKに含まれています。このコマンドを使用すると、リアルタイムのデータ転送中にカメラのフレームレートやデータサイズの情報が表示されます。また、プログラムを終了する際に ctrl+C を押すと、転送中に失敗したデータ量も表示されます。

フレームレートが想定よりも低い場合や、ここで多くのフレームドロップが発生する場合、問題はおそらくハードウェアまたは転送レイヤーにあります。

:::tip
#### ハードウェアのフレームレート設定
デバイスのフレームレートが適切に設定されているかどうかを確認してください。

#### USB接続確認
USBケーブルがホストマシンのUSBポートとU3Vカメラの両方にしっかりと接続されていることを確認してください。

#### ホストマシンのUSB 3.0ポート
USBケーブルがUSB 3.0に対応しているかどうかを確認してください。

:::

## Tool 2. Performance Test

U3Vデバイスが`framecount`（センサーによって生成されたフレームインデックス）をサポートしている場合、[Performance Test](https://github.com/Sensing-Dev/Performance-Test)ツールを使用してフレームドロップ率やドロップしたフレームを確認できます。インストールしたSensing-Dev SDKのバージョンと同じバージョンのツールを使用するようにしてください。

なお、このフレームカウントは、U3Vデバイスの転送レイヤーで番号付けされるフレームIDとは異なります。

Pythonと以下のモジュールが必要です。

```
pip3 install -U pip
pip3 install ion-python
pip3 install gendc-python==0.1.0
```

このツールは、フレームドロップがどれくらい頻繁に発生し、どこで発生するかを示します。オプション情報を確認するには`python test_performance.py -h`を実行してください。