---
sidebar_position: 1
---

# はじめに

このチュートリアルでは、画像処理フレームワーク **ion-kit** の概要を学びます。

ion-kitは、ユーザー定義の画像処理パイプラインを効率的に記述およびコンパイルできる画像処理フレームワークです。

ion-kitの基本的なアイデアは、画像のI/Oと画像処理を扱う **ビルディングブロック** から成る **パイプライン** を作成することです。

:::info

このセクションはion-kitに焦点を当てています。U3Vカメラを制御するシンプルなツールの使用方法について知りたい場合は、**[Tools from Aravis](../external/aravis/arv-tools.md)** を確認してください。

:::

## ビルディングブロック

通常、画像処理プログラムには3つのステップがあります：画像の取得、処理、および処理された画像の保存/表示です。

ion-kitを使用すると、これらのステップをすべて処理する単一のパイプラインを作成することができ、パイプラインの各コンポーネント要素はビルディングブロック（BB）と呼ばれます。

以下はビルディングブロックのいくつかの例です：

| 名前 | タイプ | 説明 |
| --------   | ------- | ------- |
| `image_io_u3v_cameraN_u16x2` | 画像I/O | U3Vカメラから16ビットの深度画像を取得し、その出力として送信します |
| `image_io_u3v_gendc` | 画像I/O | U3VカメラからGenDCコンテナデータを取得し、その出力として送信します |
| `core_cast_1d_uint16_to_float` | コア（データ型キャスト） | 1-Dの符号なし16ビット整数入力データを浮動小数点型にキャストし、その出力として送信します |
| `image_processing_bayer_demosaic_linear` | 画像処理 | 入力のベイヤー画像を3色チャネル画像に再構築し、それらをその出力として送信します |
| `image_io_gui_display` | 画像I/O | 画像を入力として受け取り、表示します |
| `image_io_binary_gendc_saver` | 画像I/O | GenDCコンテナデータを入力として受け取り、バイナリファイルに保存します |

例えば、U3Vカメラをホストマシンに接続して画像ストリームを表示したい場合、次のような最小限の5つのBBから成るパイプラインを作成する必要があります。
* 画像I/O：画像データを取得するため
* 画像処理：
    * 生画像を正規化するため
    * ベイヤーからRGB/BGRに変換するため
    * ホワイトバランスを調整するため
* 画像I/O：画像を表示するため

その後、パイプラインを実行します。

別の例として、U3VカメラストリームからのGenDCコンテナのシリーズを保存したい場合、次のBBを連結するだけです。
* 画像I/O：gendcデータを取得するため
* 画像I/O：gendcデータを保存するため

### ポート

各BBには入力ポートと出力ポートがあります。これらは3つのプロパティを持っています：
- キー（名前）
- タイプ
- サイズ（次元）

ポートは、1. BB間を接続するか、2. パイプラインのI/Oとして使用されます。

### 接続

ビルディングブロックは、前のBBの出力ポートの**タイプ**と**次元**が前のBBの入力ポートと一致する場合に接続できます。

以下の図は、上記の2番目の例を示しています。

![BB-dual](./img/BB-double.png)

最初のBB（`image_io_u3v_gendc`）の出力は "gendc" および "device_info" で、どちらも1-D `uint8` データです。続くBB（`image_io_binary_gendc_saver`）は2つの入力を取り、両方が1-D `uint8` なので、接続が機能します。

BBがノードで接続がノード間のエッジである有向非巡回グラフ（DAG）を作成する必要があると想像してみてください。エッジは、2つのノードの出力-入力が同じ次元/タイプを持っており、孤立したノードがない場合にのみ有効です。

## どこから始める：

<!--以下のjsxコードはいくつかのチュートリアルリンクカードをリストします。
カードを編集するには/src/tutorial-list.jsを変更してください-->

<div class="jsx-section highlight">
<div class="board">
<a class="card" href="obtain-device-info">デバイス情報の表示</a>
<a class="card" href="display-image">画像の表示</a>
</div></div>
